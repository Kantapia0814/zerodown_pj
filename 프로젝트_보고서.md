# ðŸš€ Zero-Downtime ë°°í¬ ì‹œìŠ¤í…œ êµ¬ì¶• í”„ë¡œì íŠ¸

---

## ðŸ“Š í”„ë¡œì íŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **í”„ë¡œì íŠ¸ëª…** | Zero-Downtime ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë°°í¬ ì‹œìŠ¤í…œ |
| **ê¸°ê°„** | 2025.07 ~ 2025.08 |
| **ëª©í‘œ** | ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ëŠ” ë¬´ì¤‘ë‹¨ ë°°í¬ ì‹œìŠ¤í…œ êµ¬í˜„ |
| **ì£¼ìš” ì„±ê³¼** | **0.00% ë‹¤ìš´íƒ€ìž„** ë‹¬ì„±, **1ms ë¯¸ë§Œ ì‘ë‹µì‹œê°„ì—ì„œ 0% ì˜¤ë¥˜** |
| **ê¸°ìˆ  ìŠ¤íƒ** | Nomad, Consul, Docker, Nginx, k6 |
| **ì €ìž¥ì†Œ** | [GitHub - Kantapia0814/zerodown_pj](https://github.com/Kantapia0814/zerodown_pj) |

---

## ðŸŽ¯ í”„ë¡œì íŠ¸ ë°°ê²½ ë° ê¸°ìˆ  ì§„í™”

### **ì´ˆê¸° ëª©í‘œì™€ ê¸°ìˆ  ì§„í™” ê³¼ì •**

#### **ì´ˆê¸° ê³„íš: Spring Cloud + Eureka ê¸°ë°˜**
ì²˜ìŒì—ëŠ” **Spring Cloudì™€ Eureka Server**ë¥¼ í™œìš©í•œ ë¬´ì¤‘ë‹¨ ë°°í¬ êµ¬ì¡°ë¥¼ êµ¬ì¶•í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.

**ê³„íší–ˆë˜ êµ¬ì¡°**:
- **Spring Cloud Gateway**: API Gateway ë° ë¡œë“œ ë°¸ëŸ°ì‹±
- **Eureka Server**: ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ë° ë“±ë¡
- **Spring Boot Services**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜

#### **ê¸°ìˆ  ìŠ¤íƒ ë³€ê²½ì˜ ê³„ê¸°**
ê°œë°œ ê³¼ì •ì—ì„œ **ë” ê°€ë²¼ìš°ë©´ì„œë„ ê°•ë ¥í•œ ì†”ë£¨ì…˜**ì„ ì°¾ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

**ë³€ê²½ ì´ìœ **:
1. **Spring Cloudì˜ ë³µìž¡ì„±**: ì„¤ì •ì´ ë³µìž¡í•˜ê³  í•™ìŠµ ê³¡ì„ ì´ ë†’ìŒ
2. **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰**: JVM ê¸°ë°˜ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ í¼
3. **ì»¨í…Œì´ë„ˆ ì¹œí™”ì„±**: Dockerì™€ì˜ í†µí•©ì´ ë³µìž¡í•¨
4. **ìš´ì˜ ì˜¤ë²„í—¤ë“œ**: Eureka Server ê´€ë¦¬ì˜ ë³µìž¡ì„± + í˜¸í™˜ì„±

#### **ìµœì¢… ì„ íƒ: Nomad + Consul + Docker + Nginx**
**ë” ê°„ë‹¨í•˜ê³  íš¨ìœ¨ì ì¸ êµ¬ì¡°**ë¡œ ë°©í–¥ì„ ì „í™˜í–ˆìŠµë‹ˆë‹¤.

**ì„ íƒ ì´ìœ **:
- **Nomad**: ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì˜ ë‹¨ìˆœí•¨ê³¼ ê°•ë ¥í•¨
- **Consul**: ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ KV ìŠ¤í† ì–´ì˜ í†µí•©
- **Docker**: ê²½ëŸ‰í™”ëœ ì»¨í…Œì´ë„ˆ í™˜ê²½
- **Nginx**: ì•ˆì •ì ì´ê³  ë¹ ë¥¸ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ

**ê²°ê³¼**: **ì˜ˆìƒë³´ë‹¤ ë›°ì–´ë‚œ ì„±ëŠ¥**ê³¼ **ê°„ë‹¨í•œ ìš´ì˜**ì„ ë‹¬ì„±í•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.

---

## ðŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### **ì „ì²´ êµ¬ì¡°ë„**

![Zero-Downtime ì‹œìŠ¤í…œ êµ¬ì¡°](./images/zerodown_final_structure.png)

*Nomad + Consul + Docker + Nginx ê¸°ë°˜ì˜ ë¬´ì¤‘ë‹¨ ë°°í¬ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜*

### **í•µì‹¬ êµ¬ì„± ìš”ì†Œ**

#### **1. Orchestration Layer**
- **Nomad**: ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë° ë°°í¬ ê´€ë¦¬
  - *ì»¨í…Œì´ë„ˆ ìƒëª…ì£¼ê¸° ê´€ë¦¬, ìžë™ ë°°í¬, ìž¥ì•  ë³µêµ¬, ë¦¬ì†ŒìŠ¤ ìŠ¤ì¼€ì¤„ë§ì„ ë‹´ë‹¹*
- **Consul**: ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ë° ë™ì  ë¼ìš°íŒ…
  - *ì„œë¹„ìŠ¤ ë“±ë¡/í•´ì œ, ìƒíƒœ ëª¨ë‹ˆí„°ë§, ì„¤ì • ë¶„ì‚° ê´€ë¦¬ë¥¼ ë‹´ë‹¹*

#### **2. Load Balancing Layer**
- **Nginx**: ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë° ë¡œë“œ ë°¸ëŸ°ì‹±
  - *í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°±ì—”ë“œ ì„œë²„ì— ë¶„ì‚°í•˜ê³  ì‘ë‹µì„ ì¤‘ê³„*
- **consul-template**: ë™ì  ì„¤ì • ìƒì„±
  - *Consulì˜ ì„œë¹„ìŠ¤ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Nginx ì„¤ì •ì„ ì‹¤ì‹œê°„ ìƒì„±*
- **nginx-auto-reload**: ìžë™ ì„¤ì • ë¦¬ë¡œë“œ
  - *ì„¤ì • íŒŒì¼ ë³€ê²½ì„ ê°ì§€í•˜ì—¬ Nginx ì„¤ì •ì„ ìžë™ìœ¼ë¡œ ì ìš©*

#### **3. Application Layer**
- **Blue-Green ë°°í¬**: Active/Standby ê·¸ë£¹ êµëŒ€ ìš´ì˜
  - *í˜„ìž¬ ìš´ì˜ ì¤‘ì¸ ë²„ì „ê³¼ ìƒˆ ë²„ì „ì„ ë™ì‹œì— ìš´ì˜í•˜ë©° ë¬´ì¤‘ë‹¨ ì „í™˜*
- **Health Check**: ìžë™ ìƒíƒœ ëª¨ë‹ˆí„°ë§
  - *ì„œë¹„ìŠ¤ ê°€ìš©ì„±ê³¼ ì‘ë‹µì„±ì„ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ìž¥ì•  ê°ì§€*
- **Dynamic Routing**: íƒœê·¸ ê¸°ë°˜ íŠ¸ëž˜í”½ ì œì–´
  - *ì„œë¹„ìŠ¤ ë©”íƒ€ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš”ì²­ì„ ì ì ˆí•œ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¼ìš°íŒ…*

---

## ðŸ”§ í•µì‹¬ ê¸°ìˆ  êµ¬í˜„

### **1. ë°°í¬ ë°©ì‹ì˜ ì§„í™” ê³¼ì •**

#### **ì´ˆê¸° ê°œë°œ: ë¡¤ë§ ì—…ë°ì´íŠ¸ ë°©ì‹**
ì²˜ìŒì—ëŠ” **ë¡¤ë§ ì—…ë°ì´íŠ¸** ë°©ì‹ìœ¼ë¡œ ê°œë°œì„ ì‹œìž‘í–ˆìŠµë‹ˆë‹¤.

**ë¡¤ë§ ì—…ë°ì´íŠ¸ ë°©ì‹**:
- ì„œë²„ë¥¼ í•˜ë‚˜ì”© ìˆœì°¨ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸
- ì—…ë°ì´íŠ¸ ì¤‘ì¸ ì„œë²„ëŠ” ì„œë¹„ìŠ¤ì—ì„œ ì œì™¸
- ë‚˜ë¨¸ì§€ ì„œë²„ë¡œ íŠ¸ëž˜í”½ ë¶„ì‚°

![ë¡¤ë§ ì—…ë°ì´íŠ¸ ìˆœì„œ](./images/rolling-update.gif)

*ë¡¤ë§ ì—…ë°ì´íŠ¸ ê³¼ì •: ì„œë²„ë¥¼ í•˜ë‚˜ì”© ìˆœì°¨ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ì—¬ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ì„ ìµœì†Œí™”*

**ì‹¤ì œ ë°˜ë„ì²´ ê³µìž¥ ì ìš© ì‹œ ë°œê²¬ë  ìˆ˜ ìžˆëŠ” ë¬¸ì œì **:
- **ê³µì • ë²„ì „ í˜¼ìž¬**: ì—…ë°ì´íŠ¸ ì¤‘ ì´ì „ ë²„ì „ê³¼ ìƒˆ ë²„ì „ì´ ë™ì‹œ ìš´ì˜ë˜ì–´ ê³µì • ë¶ˆì¼ì¹˜ ë°œìƒ
- **í’ˆì§ˆ ê´€ë¦¬ ìœ„í—˜**: ë™ì¼í•œ ì œí’ˆì— ì„œë¡œ ë‹¤ë¥¸ ê³µì •ì´ ì ìš©ë˜ì–´ í’ˆì§ˆ ë¶ˆëŸ‰ ìœ„í—˜
- **ê³µì • ì¶”ì  ë¶ˆê°€**: ì–´ë–¤ ì œí’ˆì— ì–´ë–¤ ë²„ì „ì˜ ê³µì •ì´ ì ìš©ë˜ì—ˆëŠ”ì§€ ì¶”ì  ì–´ë ¤ì›€
- **ê·œì • ìœ„ë°˜**: ë°˜ë„ì²´ ì—…ê³„ ê·œì •ìƒ ê³µì • ë³€ê²½ ì‹œ ì¦‰ì‹œ ì „ì²´ ì ìš© í•„ìš”

**ê²°ë¡ **: ë°˜ë„ì²´ ê³µìž¥ì˜ íŠ¹ìˆ˜ì„±ì„ ê³ ë ¤í•  ë•Œ **ë¡¤ë§ ì—…ë°ì´íŠ¸ ë°©ì‹ì€ ì ìš© ë¶ˆê°€**ë¡œ íŒë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.

#### **ê°œì„  ì‹œë„: Blue-Green ë°°í¬ ë°©ì‹**
**Blue-Green ë°°í¬ ë°©ì‹**:
![Blue-Green êµ¬ì¡°](./images/blue-green_structure.png)
- ì™„ì „ížˆ ë™ì¼í•œ í™˜ê²½ì„ ë‘ ê°œ êµ¬ì¶• (Blue/Green)
- ìƒˆ ë²„ì „ì„ Green í™˜ê²½ì— ë°°í¬ í›„ í…ŒìŠ¤íŠ¸
- í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ íŠ¸ëž˜í”½ì„ Blueì—ì„œ Greenìœ¼ë¡œ ì „í™˜

**ë¦¬ì†ŒìŠ¤ ë° ë³µìž¡ì„± ë¬¸ì œ**:
- **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì¦ê°€**: ë™ì¼í•œ í™˜ê²½ì„ ë‘ ì„¸íŠ¸ ìš´ì˜í•˜ëŠ” ì„œë²„ ë¹„ìš© ë¶€ë‹´
- **ì¸í”„ë¼ êµ¬ì„± ë³µìž¡ì„±**: Blue/Green í™˜ê²½ êµ¬ì¶• ë° ê´€ë¦¬ì˜ ë³µìž¡ì„±
- **ë°°í¬ íŒŒì´í”„ë¼ì¸ ìž¬ìž‘ì„±**: ê¸°ì¡´ ë¡¤ë§ ì—…ë°ì´íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì™„ì „ížˆ ìž¬ìž‘ì„±í•´ì•¼ í•˜ëŠ” ë¶€ë‹´

#### **ìµœì¢… ì„ íƒ: íƒœê·¸ ê¸°ë°˜ ë™ì  ë¼ìš°íŒ…**
**íƒœê·¸ ê¸°ë°˜ ë™ì  ë¼ìš°íŒ…**:
- Active/Standby íƒœê·¸ë¥¼ ì‚¬ìš©í•œ ì„œë¹„ìŠ¤ êµ¬ë¶„
- ìž¬ë°°í¬ ì—†ì´ íƒœê·¸ë§Œ ë³€ê²½í•˜ì—¬ ì¦‰ì‹œ ì „í™˜
- Consulê³¼ Nginxì˜ ë™ì  ì„¤ì •ìœ¼ë¡œ ì‹¤ì‹œê°„ ë¼ìš°íŒ…

**ë¡¤ë§ ì—…ë°ì´íŠ¸ë¥¼ Blue-Green ëŠë‚Œìœ¼ë¡œ ê°œì„ í•œ í•µì‹¬ í˜ì‹ **:
- **ë²„ì „ ë¶„ë¦¬ ë³´ìž¥**: ë¡¤ë§ ì—…ë°ì´íŠ¸ì˜ ë²„ì „ í˜¼ìž¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì—¬ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì¼í•œ ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ì „í™˜
- **0ì´ˆ ë‹¤ìš´íƒ€ìž„**: ìž¬ë°°í¬ ì—†ì´ íƒœê·¸ë§Œ êµí™˜í•˜ì—¬ ì„œë¹„ìŠ¤ ì—°ì†ì„± ë³´ìž¥
- **ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„±**: Blue-Greenì˜ ë¦¬ì†ŒìŠ¤ 2ë°° ë¬¸ì œë¥¼ í•´ê²°í•˜ì—¬ ë™ì¼í•œ ì¸í”„ë¼ì—ì„œ Active/Standby ìš´ì˜
- **êµ¬í˜„ ë‹¨ìˆœì„±**: ê¸°ì¡´ ë¡¤ë§ ì—…ë°ì´íŠ¸ ì¸í”„ë¼ë¥¼ ìµœëŒ€í•œ í™œìš©í•˜ì—¬ Blue-Greenì˜ ë³µìž¡ì„± ë¬¸ì œ í•´ê²°
- **ìžë™í™”**: Consul + Nginx ìžë™ ë™ê¸°í™”ë¡œ ìˆ˜ë™ ì„¤ì • ë³€ê²½ ë¶ˆí•„ìš”

#### **í˜„ìž¬ ë°°í¬ í”Œë¡œìš°**

**Deploy ê³¼ì • (ìƒˆ ë²„ì „ ë°°í¬)**:
![Deploy ë°°í¬ ê³¼ì •](./images/deploy-process.gif)

**í”Œë¡œìš° ìƒì„¸ ì„¤ëª…**:
1. **ìƒˆ ë²„ì „ ì¤€ë¹„**: ê°œë°œëœ ìƒˆë¡œìš´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ì„ Docker ì´ë¯¸ì§€ë¡œ ë¹Œë“œ
2. **Standbyì— ë°°í¬**: í˜„ìž¬ ì„œë¹„ìŠ¤ ì¤‘ì¸ Active ê·¸ë£¹ì€ ê·¸ëŒ€ë¡œ ë‘ê³ , Standby ê·¸ë£¹ì—ë§Œ ìƒˆ ë²„ì „ ë°°í¬
3. **Health Check**: ìƒˆë¡œ ë°°í¬ëœ ë²„ì „ì´ ì •ìƒì ìœ¼ë¡œ ë™ìž‘í•˜ëŠ”ì§€ ìžë™ìœ¼ë¡œ í™•ì¸
4. **ì •ìƒ ë™ìž‘ í™•ì¸**: í—¬ìŠ¤ì²´í¬ ê²°ê³¼ì— ë”°ë¼ ë‹¤ìŒ ë‹¨ê³„ ê²°ì •
5. **íƒœê·¸ ì „í™˜**: ì •ìƒ ë™ìž‘ ì‹œ Active/Standby íƒœê·¸ë¥¼ êµí™˜í•˜ì—¬ íŠ¸ëž˜í”½ ì „í™˜
6. **ì´ì „ ë²„ì „ ì •ë¦¬**: ìƒˆ ë²„ì „ì´ ì •ìƒ ë™ìž‘í•˜ë©´ ì´ì „ ë²„ì „ ì •ë¦¬
7. **ë¬¸ì œ ë°œìƒ ì‹œ**: ìƒˆ ë²„ì „ì— ë¬¸ì œê°€ ìžˆìœ¼ë©´ ê¸°ì¡´ ë²„ì „ ìœ ì§€í•˜ê³  ë¬¸ì œ ë¶„ì„

### **2. ë™ì  ë¼ìš°íŒ… ì‹œìŠ¤í…œ**

#### **consul-template ê¸°ë°˜ ì„¤ì •**
- **ë™ì  ì„¤ì • ìƒì„±**: Consulì—ì„œ ì„œë¹„ìŠ¤ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°€ì ¸ì™€ì„œ Nginx ì„¤ì •ì„ ìžë™ ìƒì„±
- **Active/Standby ë¶„ë¦¬**: Active íƒœê·¸ë¥¼ ê°€ì§„ ì„œë¹„ìŠ¤ì™€ Standby íƒœê·¸ë¥¼ ê°€ì§„ ì„œë¹„ìŠ¤ë¥¼ ë³„ë„ë¡œ ê´€ë¦¬
- **ìžë™ ì—…ë°ì´íŠ¸**: ì„œë¹„ìŠ¤ ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ì¦‰ì‹œ Nginx ì„¤ì •ì— ë°˜ì˜

**consul-templateì´ ê°ì§€í•˜ëŠ” ê²ƒ:**
- **ì„œë¹„ìŠ¤ ë“±ë¡/í•´ì œ**: Nomadì—ì„œ ì„œë¹„ìŠ¤ ì¶”ê°€/ì œê±° ì‹œ
- **íƒœê·¸ ë³€ê²½**: Active â†” Standby íƒœê·¸ êµí™˜ ì‹œ
- **í¬íŠ¸ ë³€ê²½**: ë™ì  í¬íŠ¸ ìž¬í• ë‹¹ ì‹œ
- **ìƒíƒœ ë³€ê²½**: í—¬ìŠ¤ì²´í¬ ê²°ê³¼ ë³€ê²½ ì‹œ

#### **ìžë™í™” ìŠ¤í¬ë¦½íŠ¸**
- **íŒŒì¼ ë³€ê²½ ê°ì§€**: Nginx ì„¤ì • íŒŒì¼ì´ ë³€ê²½ë˜ëŠ” ê²ƒì„ 3ì´ˆë§ˆë‹¤ í™•ì¸
- **ì•ˆì „í•œ ë¦¬ë¡œë“œ**: ì„¤ì • ì˜¤ë¥˜ê°€ ì—†ì„ ë•Œë§Œ Nginxë¥¼ ë¦¬ë¡œë“œ
- **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: ì„¤ì • ë³€ê²½ ì‹œì ê³¼ ë¦¬ë¡œë“œ ì™„ë£Œ ì‹œì ì„ ë¡œê·¸ë¡œ ê¸°ë¡

**nginx-auto-reloadì˜ ì—­í• :**
- **íŒŒì¼ ë³€ê²½ ê°ì§€**: hello-service.conf íŒŒì¼ ìˆ˜ì • ì‹œê°„ ì²´í¬
- **ì„¤ì • í…ŒìŠ¤íŠ¸**: nginx -të¡œ ë¬¸ë²• ì˜¤ë¥˜ í™•ì¸
- **ì•ˆì „í•œ ë¦¬ë¡œë“œ**: ì˜¤ë¥˜ ì—†ì„ ë•Œë§Œ nginx -s reload

**ì „ì²´ ìžë™í™” í”Œë¡œìš°:**

![ì „ì²´ ìžë™í™” í”Œë¡œìš°](./images/automation-flow.png)

*Consul ë³€ê²½ë¶€í„° Nginx ì„¤ì • ì ìš©ê¹Œì§€ì˜ ì™„ì „ ìžë™í™”ëœ íŒŒì´í”„ë¼ì¸*

---

## ðŸ“ˆ ì„±ëŠ¥ ê²€ì¦ ê²°ê³¼

### **ë¶€í•˜ í…ŒìŠ¤íŠ¸ (k6)**
- **í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**: 5ë¶„ê°„ ì´ˆë‹¹ 1,000ê°œ ë° 10,000ê°œ ìš”ì²­ì„ ì§€ì†ì ìœ¼ë¡œ ì „ì†¡
- **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: ì‘ë‹µì‹œê°„, ì„±ê³µë¥ , ì—ëŸ¬ìœ¨ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¸¡ì •
- **ë¬´ì¤‘ë‹¨ ê²€ì¦**: ë°°í¬ ì „í™˜ ê³¼ì •ì—ì„œë„ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ì´ ì—†ëŠ”ì§€ í™•ì¸

### **í…ŒìŠ¤íŠ¸ ê²°ê³¼**

#### **ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ (ì´ˆë‹¹ 1,000 ìš”ì²­)**
| ì§€í‘œ | ê²°ê³¼ | ê¸°ì¤€ê°’ | í‰ê°€ |
|------|------|--------|------|
| **ì´ ìš”ì²­ ìˆ˜** | 300,001 | - | âœ… |
| **ì„±ê³µë¥ ** | 100.00% | > 99.9% | âœ… |
| **ì‹¤íŒ¨ìœ¨** | 0.00% | < 0.1% | âœ… |
| **í‰ê·  ì‘ë‹µì‹œê°„** | 962.71Âµs | < 2ms | âœ… |
| **90% ì‘ë‹µì‹œê°„** | 1.33ms | < 5ms | âœ… |
| **95% ì‘ë‹µì‹œê°„** | 1.53ms | < 10ms | âœ… |
| **ìµœëŒ€ ì‘ë‹µì‹œê°„** | 95.66ms | < 100ms | âœ… |

#### **ë‘ ë²ˆì§¸ í…ŒìŠ¤íŠ¸ (ì´ˆë‹¹ 10,000 ìš”ì²­)**
| ì§€í‘œ | ê²°ê³¼ | ê¸°ì¤€ê°’ | í‰ê°€ |
|------|------|--------|------|
| **ì´ ìš”ì²­ ìˆ˜** | 2,858,907 | - | âœ… |
| **ì„±ê³µë¥ ** | 100.00% | > 99.9% | âœ… |
| **ì‹¤íŒ¨ìœ¨** | 0.00% | < 0.1% | âœ… |
| **í‰ê·  ì‘ë‹µì‹œê°„** | 4.17ms | < 10ms | âœ… |
| **90% ì‘ë‹µì‹œê°„** | 8.71ms | < 15ms | âœ… |
| **95% ì‘ë‹µì‹œê°„** | 11.56ms | < 20ms | âœ… |
| **ìµœëŒ€ ì‘ë‹µì‹œê°„** | 195.66ms | < 200ms | âœ… |
| **ì´ˆë‹¹ ì²˜ë¦¬ ìš”ì²­** | 9,517.98 | - | âœ… |
| **Dropped Iterations** | 141,102 (4.7%) | < 5% | âœ… |

### **ë¬´ì¤‘ë‹¨ ì „í™˜ ê²€ì¦**
- **í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**: ë¶€í•˜ í…ŒìŠ¤íŠ¸ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ë©´ì„œ ë™ì‹œì— ë²„ì „ ì „í™˜ ìˆ˜í–‰
- **ì‹¤ì‹œê°„ ê²€ì¦**: ì „í™˜ ê³¼ì •ì—ì„œë„ 0% ì—ëŸ¬ìœ¨ì„ ìœ ì§€í•˜ëŠ”ì§€ í™•ì¸
- **ê²°ê³¼**: ì´ 3,158,908ê°œ ìš”ì²­(300,001 + 2,858,907) ëª¨ë‘ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨

---

## ðŸ› ï¸ ê°œë°œ ê³¼ì • ë° í•´ê²°í•œ ê¸°ìˆ ì  ì´ìŠˆ

### **ì£¼ìš” ê¸°ìˆ ì  ë„ì „ê³¼ì œ**

#### **1. AWK ìŠ¤í¬ë¦½íŠ¸ ê·¸ë£¹ ê°ì§€ ë²„ê·¸ í•´ê²°**
**ë¬¸ì œ**: deploy ì‹œ standby ê·¸ë£¹ë¿ë§Œ ì•„ë‹ˆë¼ active ê·¸ë£¹ë„ í•¨ê»˜ ìˆ˜ì •ë˜ëŠ” ë²„ê·¸

**í•´ê²° ë°©ë²•**: 
- ê·¸ë£¹ ëì„ ê°ì§€í•˜ëŠ” ë¡œì§ì„ ê°œì„ í•˜ì—¬ ì •í™•í•œ ë²”ìœ„ë§Œ ìˆ˜ì •
- ë¼ì¸ ë²ˆí˜¸ ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•œ ê·¸ë£¹ ë²”ìœ„ë¥¼ ê³„ì‚°í•˜ì—¬ ìˆ˜ì •
- ê²°ê³¼ì ìœ¼ë¡œ standby ê·¸ë£¹ë§Œ ì—…ë°ì´íŠ¸í•˜ê³  active ê·¸ë£¹ì€ ê±´ë“œë¦¬ì§€ ì•ŠìŒ

#### **2. ë™ì  IP ì£¼ì†Œ ëŒ€ì‘**
**í•´ê²°**: ì„¤ì • íŒŒì¼ì—ì„œ IP ì£¼ì†Œë¥¼ ìžë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ì¹˜í™˜í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ì—¬ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆë„ë¡ ê°œì„ 

#### **3. ì„œë¹„ìŠ¤ ë“±ë¡ íƒ€ì´ë° ì´ìŠˆ**
**í•´ê²°**: Consulì— ì„œë¹„ìŠ¤ê°€ ì™„ì „ížˆ ë“±ë¡ë  ë•Œê¹Œì§€ 30ì´ˆ ëŒ€ê¸°í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ì—¬ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ ì „í™˜ ë³´ìž¥

### **ê°œë°œ ì¼ì • ë° ë§ˆì¼ìŠ¤í†¤**

| ë‹¨ê³„ | ê¸°ê°„ | ì£¼ìš” ìž‘ì—… | ê²°ê³¼ |
|------|------|----------|------|
| **ì„¤ê³„** | 1ì£¼ | ì•„í‚¤í…ì²˜ ì„¤ê³„, ê¸°ìˆ  ìŠ¤íƒ ì„ ì • | ì„¤ê³„ ë¬¸ì„œ ì™„ì„± |
| **ê°œë°œ** | 2ì£¼ | í•µì‹¬ ë¡œì§ êµ¬í˜„, ìŠ¤í¬ë¦½íŠ¸ ìž‘ì„± | MVP ì™„ì„± |
| **í…ŒìŠ¤íŠ¸** | 1ì£¼ | ë¶€í•˜ í…ŒìŠ¤íŠ¸, ë²„ê·¸ ìˆ˜ì • | ì„±ëŠ¥ ëª©í‘œ ë‹¬ì„± |
| **ë¬¸ì„œí™”** | 3ì¼ | ì„¤ì¹˜ ê°€ì´ë“œ, API ë¬¸ì„œ ìž‘ì„± | ë°°í¬ ì¤€ë¹„ ì™„ë£Œ |

---

## ðŸŽ í”„ë¡œì íŠ¸ ê²°ê³¼ë¬¼

### **1. í•µì‹¬ ìŠ¤í¬ë¦½íŠ¸**
- **`toggle_version_consul_true_zero_downtime.sh`**: ë¬´ì¤‘ë‹¨ ë°°í¬ ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸
  - `status`: í˜„ìž¬ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
  - `switch`: ì¦‰ì‹œ ë²„ì „ ì „í™˜ (0ì´ˆ ë‹¤ìš´íƒ€ìž„)
  - `deploy`: ìƒˆ ë²„ì „ standby ë°°í¬

#### **ìŠ¤í¬ë¦½íŠ¸ ìž‘ë™ ë°©ë²•**

##### **1. Status ëª…ë ¹ì–´**
```bash
./toggle_version_consul_true_zero_downtime.sh status
```

**ìž‘ë™ ê³¼ì •:**
1. **Consul ì„œë¹„ìŠ¤ ì¡°íšŒ**: Active/Standby íƒœê·¸ë¥¼ ê°€ì§„ ì„œë¹„ìŠ¤ë“¤ì„ Consulì—ì„œ ì¡°íšŒ
2. **í—¬ìŠ¤ì²´í¬ ìˆ˜í–‰**: ê° ì„œë¹„ìŠ¤ì˜ `/hello` ì—”ë“œí¬ì¸íŠ¸ë¡œ HTTP ìš”ì²­ ì „ì†¡
3. **ìƒíƒœ í‘œì‹œ**: Active ì„œë¹„ìŠ¤(ðŸ”µ)ì™€ Standby ì„œë¹„ìŠ¤(âšª)ë¥¼ êµ¬ë¶„í•˜ì—¬ í‘œì‹œ
4. **ë²„ì „ ì •ë³´**: ê° ì„œë¹„ìŠ¤ì˜ ë²„ì „ ì •ë³´ì™€ í¬íŠ¸ ë²ˆí˜¸ í‘œì‹œ

**ì¶œë ¥ ì˜ˆì‹œ:**
```
ðŸ”µ Active ì„œë¹„ìŠ¤ë“¤ (í˜„ìž¬ íŠ¸ëž˜í”½ ì²˜ë¦¬ ì¤‘):
âœ… 127.0.0.1:12345 (v1) [_nomad-task-...-hello-service-http]
âœ… 127.0.0.1:23456 (v1) [_nomad-task-...-hello-service-http]

âšª Standby ì„œë¹„ìŠ¤ë“¤ (ëŒ€ê¸° ì¤‘):
â¸ï¸ 127.0.0.1:34567 (v2) [_nomad-task-...-hello-service-http]
â¸ï¸ 127.0.0.1:45678 (v2) [_nomad-task-...-hello-service-http]
```

##### **2. Switch ëª…ë ¹ì–´**
```bash
./toggle_version_consul_true_zero_downtime.sh switch
```

![Switch ì „í™˜ ê³¼ì •](./images/switch-process.gif)

**ìž‘ë™ ê³¼ì •:**
1. **í˜„ìž¬ ìƒíƒœ í™•ì¸**: Active/Standby ì„œë¹„ìŠ¤ ì¡´ìž¬ ì—¬ë¶€ í™•ì¸
2. **Standby í—¬ìŠ¤ì²´í¬**: Standby ì„œë¹„ìŠ¤ë“¤ì˜ ì •ìƒ ë™ìž‘ í™•ì¸
3. **íƒœê·¸ êµí™˜**: Active â†” Standby íƒœê·¸ë¥¼ êµí™˜
4. **Nomad Job ìž¬ì‹¤í–‰**: íƒœê·¸ ë³€ê²½ì‚¬í•­ì„ ì ìš©í•˜ê¸° ìœ„í•´ ìµœì†Œ ìž¬ì‹œìž‘
5. **ì „í™˜ ê²€ì¦**: ìƒˆ Active ì„œë¹„ìŠ¤ì˜ ì‘ë‹µ í™•ì¸

**í•µì‹¬ í˜ì‹ :**
- **ìž¬ë°°í¬ ì—†ìŒ**: ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê·¸ëŒ€ë¡œ ë‘ê³  íƒœê·¸ë§Œ êµí™˜
- **0ì´ˆ ë‹¤ìš´íƒ€ìž„**: ì „í™˜ ê³¼ì •ì—ì„œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ìŒ
- **ì¦‰ì‹œ ë¡¤ë°±**: ë¬¸ì œ ë°œìƒ ì‹œ ë‹¤ì‹œ switch ëª…ë ¹ì–´ë¡œ ì¦‰ì‹œ ë³µêµ¬

##### **3. Deploy ëª…ë ¹ì–´**
```bash
./toggle_version_consul_true_zero_downtime.sh deploy v3
```

![Deploy ë°°í¬ ê³¼ì •](./images/deploy-process.gif)

**ìž‘ë™ ê³¼ì •:**
1. **Standby ê·¸ë£¹ ì‹ë³„**: Nomad job íŒŒì¼ì—ì„œ Standby íƒœê·¸ë¥¼ ê°€ì§„ ê·¸ë£¹ ì°¾ê¸°
2. **ì´ë¯¸ì§€ ë²„ì „ ë³€ê²½**: Standby ê·¸ë£¹ì˜ Docker ì´ë¯¸ì§€ë¥¼ ìƒˆ ë²„ì „ìœ¼ë¡œ ë³€ê²½
3. **Standbyë§Œ ìž¬ë°°í¬**: Active ê·¸ë£¹ì€ ê±´ë“œë¦¬ì§€ ì•Šê³  Standby ê·¸ë£¹ë§Œ ì—…ë°ì´íŠ¸
4. **í—¬ìŠ¤ì²´í¬ ëŒ€ê¸°**: ìƒˆ ë²„ì „ì´ ì •ìƒ ë™ìž‘í•  ë•Œê¹Œì§€ ëŒ€ê¸°
5. **ë°°í¬ ê²€ì¦**: Standby ì—”ë“œí¬ì¸íŠ¸ë¡œ ìƒˆ ë²„ì „ í…ŒìŠ¤íŠ¸

**í•µì‹¬ íŠ¹ì§•:**
- **Active ë³´í˜¸**: í˜„ìž¬ ìš´ì˜ ì¤‘ì¸ Active ì„œë¹„ìŠ¤ëŠ” ì „í˜€ ê±´ë“œë¦¬ì§€ ì•ŠìŒ
- **ì•ˆì „í•œ ë°°í¬**: ìƒˆ ë²„ì „ì„ Standbyì— ë¯¸ë¦¬ ë°°í¬í•˜ì—¬ ì•ˆì „í•˜ê²Œ í…ŒìŠ¤íŠ¸
- **ì¤€ë¹„ ì™„ë£Œ**: ë°°í¬ ì™„ë£Œ í›„ switch ëª…ë ¹ì–´ë¡œ ì¦‰ì‹œ ì „í™˜ ê°€ëŠ¥

### **2. ì¸í”„ë¼ ì„¤ì •**
- **`hello-service-dynamic.nomad`**: Nomad job ì •ì˜
- **`nginx-configs/`**: ë™ì  Nginx ì„¤ì •
- **`scripts/`**: ìžë™í™” ìŠ¤í¬ë¦½íŠ¸

### **3. ë¬¸ì„œ ë° ê°€ì´ë“œ**
- **`README.md`**: ì™„ì „í•œ ì„¤ì¹˜ ë° ì‚¬ìš© ê°€ì´ë“œ
- **`ì‹œìŠ¤í…œ_ì‹œìž‘_ìˆœì„œ.md`**: ë‹¨ê³„ë³„ ì‹¤í–‰ ë°©ë²•
- **`ì‹œìŠ¤í…œ_ìž¬ì‹œìž‘_ê°€ì´ë“œ.md`**: ìž¬ì‹œìž‘ ë§¤ë‰´ì–¼

### **4. í…ŒìŠ¤íŠ¸ ë„êµ¬**
- **`k6-quick-test.js`**: ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
- **ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**: 1,000 RPS, 5ë¶„ê°„

---

## ðŸ”§ ì‹¤ë¬´ ì„œë¹„ìŠ¤ ì ìš© ë°©ë²•

### **í˜„ìž¬ êµ¬ì¡°ë¥¼ drimEAPì— ì ìš©í•˜ê¸°**

#### **1. ì„œë¹„ìŠ¤ ì´ë¦„ ë³€ê²½**
- **ê¸°ì¡´**: hello-service
- **ë³€ê²½**: drimEAP
- **ì´ìœ **: ì‹¤ì œ ìš´ì˜ ì„œë¹„ìŠ¤ëª…ìœ¼ë¡œ ë³€ê²½

#### **2. í¬íŠ¸ êµ¬ì„± ì¶”ê°€**
- **ê¸°ì¡´**: ì›¹ ì„œë¹„ìŠ¤ë§Œ (í¬íŠ¸ 8080)
- **ë³€ê²½**: ì›¹ ì„œë¹„ìŠ¤ (í¬íŠ¸ 8080) + HSMS í†µì‹  (í¬íŠ¸ 5000)
- **ì´ìœ **: ë°˜ë„ì²´ ìž¥ë¹„ì™€ì˜ í†µì‹ ì„ ìœ„í•œ HSMS í¬íŠ¸ í•„ìš”

#### **3. ì—”ë“œí¬ì¸íŠ¸ í™•ìž¥**
- **ê¸°ì¡´**: /hello (ê°„ë‹¨í•œ ì›¹ ì‘ë‹µ)
- **ë³€ê²½**: 
  - /hsms/ (ë°˜ë„ì²´ ìž¥ë¹„ í†µì‹ )
  - /health (ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸)
  - / (ì›¹ ì¸í„°íŽ˜ì´ìŠ¤)
- **ì´ìœ **: drimEAPì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ ì§€ì›

#### **4. ë„ë©”ì¸ ì„¤ì •**
- **ê¸°ì¡´**: localhost:8080 (ê°œë°œìš©)
- **ë³€ê²½**: drimEAP.company.com (ìš´ì˜ìš©)
- **ì´ìœ **: ì‹¤ì œ ìš´ì˜ í™˜ê²½ì— ë§žëŠ” ë„ë©”ì¸ ì„¤ì •

### **ì ìš© ê³¼ì •**

#### **1ë‹¨ê³„: ê¸°ì¡´ ì„œë¹„ìŠ¤ ì •ë¦¬**
- hello-service ì¤‘ì§€
- ê´€ë ¨ ì„¤ì • íŒŒì¼ ë°±ì—…

#### **2ë‹¨ê³„: ìƒˆ ì„¤ì • ì ìš©**
- drimEAP ì „ìš© ì„¤ì • íŒŒì¼ ìƒì„±
- Nomad, Nginx, Consul ì„¤ì • ì—…ë°ì´íŠ¸
- HSMS í†µì‹  í¬íŠ¸ ì¶”ê°€

#### **3ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦**
- drimEAP ì„œë¹„ìŠ¤ ì •ìƒ ë™ìž‘ í™•ì¸
- HSMS í†µì‹  í…ŒìŠ¤íŠ¸
- ë¬´ì¤‘ë‹¨ ë°°í¬ ê¸°ëŠ¥ ê²€ì¦

### **ì£¼ìš” ë³€ê²½ì‚¬í•­ ìš”ì•½**

| í•­ëª© | ê¸°ì¡´ (hello-service) | ë³€ê²½ í›„ (drimEAP) |
|------|---------------------|-------------------|
| **ì„œë¹„ìŠ¤ëª…** | hello-service | drimEAP |
| **í¬íŠ¸** | 8080 | 8080 (HTTP) + 5000 (HSMS) |
| **ì—”ë“œí¬ì¸íŠ¸** | /hello | /hsms/, /health, / |
| **ì´ë¯¸ì§€** | hello-service:latest | drimEAP:latest |
| **ë„ë©”ì¸** | localhost:8080 | drimEAP.company.com |

### **ê¸°ëŒ€ íš¨ê³¼**
- **ê¸°ì¡´ ì¸í”„ë¼ ìž¬ì‚¬ìš©**: Nomad, Consul, Nginx êµ¬ì¡° ê·¸ëŒ€ë¡œ í™œìš©
- **ë¬´ì¤‘ë‹¨ ë°°í¬**: drimEAP ì—…ë°ì´íŠ¸ ì‹œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ìŒ
- **ë°˜ë„ì²´ ìž¥ë¹„ ì—°ê³„**: HSMS í†µì‹  í¬íŠ¸ ì¶”ê°€ë¡œ ìž¥ë¹„ì™€ ì§ì ‘ í†µì‹ 
- **í™•ìž¥ì„±**: í•„ìš”ì‹œ ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ ì¡°ì • ê°€ëŠ¥

---

## ðŸ”’ íì‡„íšŒë¡œ í™˜ê²½ì—ì„œì˜ ìš´ì˜ ë°©ì•ˆ

### **íì‡„íšŒë¡œ í™˜ê²½ì˜ íŠ¹ì§•**
- **ì™¸ë¶€ ì¸í„°ë„· ì ‘ê·¼ ë¶ˆê°€**: ë³´ì•ˆìƒ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì°¨ë‹¨
- **ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ë§Œ ì‚¬ìš©**: íšŒì‚¬ ë‚´ë¶€ ì„œë²„ë“¤ ê°„ í†µì‹ ë§Œ ê°€ëŠ¥
- **ë³´ì•ˆ ì •ì±… ì—„ê²©**: ëª¨ë“  ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì¹˜ ë° ì—…ë°ì´íŠ¸ ì œí•œ

### **íì‡„íšŒë¡œ í™˜ê²½ì—ì„œì˜ ì ìš© ë°©ë²•**

#### **1. ì†Œí”„íŠ¸ì›¨ì–´ íŒ¨í‚¤ì§€ ì‚¬ì „ ì¤€ë¹„**
- **Docker ì´ë¯¸ì§€**: ëª¨ë“  í•„ìš”í•œ ì´ë¯¸ì§€ë¥¼ ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œ
- **ë‚´ë¶€ Docker Registry**: íì‡„íšŒë¡œ í™˜ê²½ìš© í”„ë¼ì´ë¹— ë ˆì§€ìŠ¤íŠ¸ë¦¬ êµ¬ì¶•
- **Nomad ë°”ì´ë„ˆë¦¬**: ìµœì‹  ë²„ì „ì„ USBë‚˜ ë‚´ë¶€ ì €ìž¥ì†Œì— ë³´ê´€
- **Consul ë°”ì´ë„ˆë¦¬**: ì„¤ì¹˜ íŒŒì¼ì„ ì‚¬ì „ì— ì¤€ë¹„
- **Nginx íŒ¨í‚¤ì§€**: ì†ŒìŠ¤ì½”ë“œ ë˜ëŠ” ë°”ì´ë„ˆë¦¬ íŒ¨í‚¤ì§€ ì¤€ë¹„
- **Nginx ì„¤ì •**: í…œí”Œë¦¿ íŒŒì¼ë“¤ì„ ë¯¸ë¦¬ ìž‘ì„±

#### **2. ì„¤ì¹˜ ë° ë°°í¬ í”„ë¡œì„¸ìŠ¤**
```
1ë‹¨ê³„: ì‚¬ì „ ì¤€ë¹„
   â”œâ”€â”€ ëª¨ë“  ë°”ì´ë„ˆë¦¬ íŒŒì¼ USB ë³µì‚¬
   â”œâ”€â”€ Docker ì´ë¯¸ì§€ tar íŒŒì¼ ìƒì„±
   â””â”€â”€ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì¤€ë¹„

2ë‹¨ê³„: íì‡„íšŒë¡œ í™˜ê²½ ì ìš©
   â”œâ”€â”€ USBì—ì„œ íŒŒì¼ ë³µì‚¬
   â”œâ”€â”€ ë‚´ë¶€ Docker Registry êµ¬ì¶•
   â”œâ”€â”€ Docker ì´ë¯¸ì§€ë¥¼ ë‚´ë¶€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì—…ë¡œë“œ
   â”œâ”€â”€ Nomad/Consul ì„¤ì¹˜
   â”œâ”€â”€ Nginx ì„¤ì¹˜ (íŒ¨í‚¤ì§€ ë˜ëŠ” ì†ŒìŠ¤ ì»´íŒŒì¼)
   â””â”€â”€ ì„¤ì • íŒŒì¼ ì ìš©

3ë‹¨ê³„: ê²€ì¦
   â”œâ”€â”€ ì„œë¹„ìŠ¤ ì •ìƒ ë™ìž‘ í™•ì¸
   â”œâ”€â”€ ë¬´ì¤‘ë‹¨ ë°°í¬ í…ŒìŠ¤íŠ¸
   â””â”€â”€ ë³´ì•ˆ ì •ì±… ì¤€ìˆ˜ í™•ì¸
```

#### **3. ë³´ì•ˆ ì •ì±… ì¤€ìˆ˜ ë°©ì•ˆ**
- **ë°©í™”ë²½ ì„¤ì •**: í•„ìš”í•œ í¬íŠ¸ë§Œ ê°œë°© (80, 443, 8080, 8500, 4646)
- **ì‚¬ìš©ìž ê¶Œí•œ**: ìµœì†Œ ê¶Œí•œ ì›ì¹™ ì ìš©
- **ë¡œê·¸ ê´€ë¦¬**: ëª¨ë“  ì ‘ê·¼ ë¡œê·¸ ê¸°ë¡ ë° ëª¨ë‹ˆí„°ë§
- **ë°±ì—… ì •ì±…**: ì •ê¸°ì ì¸ ì„¤ì • íŒŒì¼ ë° ë°ì´í„° ë°±ì—…

#### **4. ì—…ë°ì´íŠ¸ ë° ìœ ì§€ë³´ìˆ˜**
- **ì •ê¸° ì—…ë°ì´íŠ¸**: ë¶„ê¸°ë³„ ë³´ì•ˆ íŒ¨ì¹˜ ì ìš©
- **ë°±ì—… ë³µêµ¬**: ë¬¸ì œ ë°œìƒ ì‹œ ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
- **ëª¨ë‹ˆí„°ë§**: ë‚´ë¶€ ëª¨ë‹ˆí„°ë§ ë„êµ¬ë¡œ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
- **ë¬¸ì„œí™”**: ëª¨ë“  ë³€ê²½ì‚¬í•­ì„ ë‚´ë¶€ ë¬¸ì„œì— ê¸°ë¡

#### **5. Nginx ì„¤ì¹˜ ì„¸ë¶€ ë°©ë²•**
- **íŒ¨í‚¤ì§€ ì„¤ì¹˜**: Ubuntu/Debian (.deb) ë˜ëŠ” CentOS/RHEL (.rpm) íŒ¨í‚¤ì§€ ì‚¬ìš©
- **ì†ŒìŠ¤ ì»´íŒŒì¼**: ì™¸ë¶€ ì˜ì¡´ì„± ì—†ì´ ì§ì ‘ ì»´íŒŒì¼í•˜ì—¬ ì„¤ì¹˜
- **ì„¤ì • íŒŒì¼**: consul-template ì„¤ì • ë° nginx-auto-reload ìŠ¤í¬ë¦½íŠ¸ ì ìš©
- **ì„œë¹„ìŠ¤ ë“±ë¡**: systemd ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ì—¬ ìžë™ ì‹œìž‘ ì„¤ì •

#### **6. Docker Registry êµ¬ì¶• ë°©ë²•**
- **í”„ë¼ì´ë¹— ë ˆì§€ìŠ¤íŠ¸ë¦¬**: Harbor ë˜ëŠ” Docker Registry v2 ì‚¬ìš©
- **ì´ë¯¸ì§€ ì €ìž¥ì†Œ**: ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ì— Docker ì´ë¯¸ì§€ ì €ìž¥ì†Œ êµ¬ì¶•
- **ë³´ì•ˆ ì„¤ì •**: ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬ë¡œ ë³´ì•ˆ ê°•í™”
- **ë°±ì—… ì •ì±…**: ì •ê¸°ì ì¸ ì´ë¯¸ì§€ ë°±ì—… ë° ë³µêµ¬ ë°©ì•ˆ

### **íì‡„íšŒë¡œ í™˜ê²½ì—ì„œì˜ ìž¥ì **
âœ… **ë³´ì•ˆ ê°•í™”**: ì™¸ë¶€ ì ‘ê·¼ ì°¨ë‹¨ìœ¼ë¡œ ë³´ì•ˆ ìœ„í—˜ ìµœì†Œí™”
âœ… **ì•ˆì •ì„±**: ì™¸ë¶€ ì˜ì¡´ì„± ì—†ì´ ë…ë¦½ì  ìš´ì˜
âœ… **ì œì–´ ê°€ëŠ¥**: ëª¨ë“  í™˜ê²½ì„ ì™„ì „ížˆ ì œì–´
âœ… **ê·œì • ì¤€ìˆ˜**: íšŒì‚¬ ë³´ì•ˆ ì •ì±… ì™„ë²½ ì¤€ìˆ˜

### **Docker Hub vs ë‚´ë¶€ Registry ë¹„êµ**
| êµ¬ë¶„ | Docker Hub | ë‚´ë¶€ Registry |
|------|------------|---------------|
| **ì ‘ê·¼ì„±** | ì¸í„°ë„· í•„ìš” | ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ë§Œ |
| **ë³´ì•ˆ** | ê³µê°œ ì €ìž¥ì†Œ | í”„ë¼ì´ë¹— ì €ìž¥ì†Œ |
| **ì†ë„** | ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì†ë„ | ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ì†ë„ |
| **ì œì–´** | ì œí•œì  | ì™„ì „ ì œì–´ |
| **ì ìš© í™˜ê²½** | í…ŒìŠ¤íŠ¸/ê°œë°œ | íì‡„íšŒë¡œ ìš´ì˜ |

**í˜„ìž¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì˜ íŽ¸ì˜ì„±ì„ ìœ„í•´ Docker Hubë¥¼ ì‚¬ìš©í–ˆìœ¼ë©°, íì‡„íšŒë¡œ í™˜ê²½ì—ì„œëŠ” ë‚´ë¶€ Docker Registryë§Œ êµ¬ì¶•í•˜ë©´ ì™„ë²½í•˜ê²Œ ì ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.**

### **ì£¼ì˜ì‚¬í•­**
âš ï¸ **ì‚¬ì „ ì¤€ë¹„ í•„ìˆ˜**: ëª¨ë“  ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ë¯¸ë¦¬ ì¤€ë¹„í•´ì•¼ í•¨
âš ï¸ **í…ŒìŠ¤íŠ¸ í™˜ê²½**: ì‹¤ì œ ì ìš© ì „ ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸ í•„ìš”
âš ï¸ **ì „ë¬¸ ì¸ë ¥**: ì‹œìŠ¤í…œ ê´€ë¦¬ ì „ë¬¸ê°€ ë°°ì¹˜ í•„ìš”
âš ï¸ **ì •ê¸° ì ê²€**: ë³´ì•ˆ ì·¨ì•½ì  ì •ê¸° ì ê²€ ë° íŒ¨ì¹˜

---

## ðŸ“š í•™ìŠµ ì„±ê³¼ ë° ê¸°ìˆ  ìŠµë“

### **ìƒˆë¡œ ìŠµë“í•œ ê¸°ìˆ **
1. **HashiCorp ìŠ¤íƒ**: Nomad, Consul ì‹¬í™” í•™ìŠµ
2. **ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜**: ì„œë¹„ìŠ¤ ë©”ì‹œ ì•„í‚¤í…ì²˜ ì´í•´
3. **ë™ì  ì„¤ì • ê´€ë¦¬**: consul-template í™œìš©
4. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: k6ë¥¼ í™œìš©í•œ ë¶€í•˜ í…ŒìŠ¤íŠ¸

### **ë¬¸ì œ í•´ê²° ì—­ëŸ‰**
1. **ë””ë²„ê¹… ìŠ¤í‚¬**: AWK ìŠ¤í¬ë¦½íŠ¸ ë²„ê·¸ ë¶„ì„ ë° í•´ê²°
2. **ì‹œìŠ¤í…œ ì„¤ê³„**: ë¬´ì¤‘ë‹¨ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„
3. **ìžë™í™”**: ë°˜ë³µ ìž‘ì—…ì˜ ìŠ¤í¬ë¦½íŠ¸ ìžë™í™”
4. **ë¬¸ì„œí™”**: ê¸°ìˆ  ë¬¸ì„œ ìž‘ì„± ë° ì§€ì‹ ê³µìœ 

---

## ðŸ“Ž ì°¸ê³  ìžë£Œ

- **GitHub ì €ìž¥ì†Œ**: https://github.com/Kantapia0814/zerodown_pj
- **Nomad ê³µì‹ ë¬¸ì„œ**: https://www.nomadproject.io/docs
- **Consul ê³µì‹ ë¬¸ì„œ**: https://www.consul.io/docs
- **k6 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: https://k6.io/docs

**ðŸŽ‰ Zero-Downtime ë°°í¬ ì‹œìŠ¤í…œì„ í†µí•´ ì•ˆì •ì ì´ê³  íš¨ìœ¨ì ì¸ ì„œë¹„ìŠ¤ ìš´ì˜ ê¸°ë°˜ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤!**